<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> 0.0.8-beta-doc Docs</a> (3% documented)</p>
        <p class="header-right"><a href="https://github.com/zed-io/flow-swift"><img src="img/gh.png" alt="GitHub"/>View on GitHub</a></p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html"> Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
          Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Flow.html">Flow</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/TransactionBuild.html">– TransactionBuild</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/TransactionBuilder.html">– TransactionBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/FError.html">– FError</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/SignatureAlgorithm.html">– SignatureAlgorithm</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/HashAlgorithm.html">– HashAlgorithm</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Account.html">– Account</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/AccountKey.html">– AccountKey</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Address.html">– Address</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Argument.html">– Argument</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/BlockHeader.html">– BlockHeader</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/BlockSeal.html">– BlockSeal</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Block.html">– Block</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Cadence.html">– Cadence</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/ChainID.html">– ChainID</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow.html#/s:4FlowAAC10CollectionV">– Collection</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow.html#/s:4FlowAAC19CollectionGuaranteeV">– CollectionGuarantee</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/DomainTag.html">– DomainTag</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Event.html">– Event</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/EventResult.html">– EventResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Snapshot.html">– Snapshot</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/EventPayload.html">– EventPayload</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/ID.html">– ID</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Script.html">– Script</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/ScriptResponse.html">– ScriptResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Signature.html">– Signature</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Transaction.html">– Transaction</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow.html#/s:4FlowAAC17TransactionResultV">– TransactionResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/TransactionProposalKey.html">– TransactionProposalKey</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/TransactionSignature.html">– TransactionSignature</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/PublicKey.html">– PublicKey</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/Code.html">– Code</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Flow/AccessAPI.html">– AccessAPI</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Global%20Variables.html">Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Global%20Variables.html#/s:4Flow4flowA2ACvp">flow</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Array.html">Array</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Data.html">Data</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow9arguments4textA2AC16TransactionBuildOAD8ArgumentVycd_tF">arguments(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow9arguments4textA2AC16TransactionBuildOSayAD7CadenceC6FValueOGyXE_tF">arguments(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow9arguments4textA2AC16TransactionBuildOSayAD8ArgumentVGyXE_tF">arguments(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow11authorizers4textA2AC16TransactionBuildOAD7AddressVycd_tF">authorizers(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow11authorizers4textA2AC16TransactionBuildOSayAD7AddressVGyXE_tF">authorizers(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow7cadence4textA2AC16TransactionBuildOAD6ScriptVyXE_tF">cadence(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow7cadence4textA2AC16TransactionBuildOSSyXE_tF">cadence(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow8gasLimit4textA2AC16TransactionBuildO6BigInt0G4UIntVyXE_tF">gasLimit(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow8gasLimit4textA2AC16TransactionBuildOSiyXE_tF">gasLimit(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow5payer4textA2AC16TransactionBuildOAD7AddressVyXE_tF">payer(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow5payer4textA2AC16TransactionBuildOSSyXE_tF">payer(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow8proposer4textA2AC16TransactionBuildOAD0D11ProposalKeyVyXE_tF">proposer(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow8proposer4textA2AC16TransactionBuildOAD7AddressVyXE_tF">proposer(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow8proposer4textA2AC16TransactionBuildOSSyXE_tF">proposer(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow8refBlock4textA2AC16TransactionBuildOAD2IDVyXE_tF">refBlock(text:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:4Flow8refBlock4textA2AC16TransactionBuildOSSSgyXE_tF">refBlock(text:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/FlowAccessBlockProtocol.html">FlowAccessBlockProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/FlowAccessProtocol.html">FlowAccessProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/FlowEntity.html">FlowEntity</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/FlowSigner.html">FlowSigner</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4Flow5Bytesa">Bytes</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:4Flow8Callbacka">Callback</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='flow-swift-sdk' class='heading'>Flow Swift SDK</h1>

<p>The Flow SDK is a Swift Library for Flow blockchain (<a href="https://www.onflow.org">https://www.onflow.org</a>). </p>
<h3 id='features' class='heading'>Features</h3>

<p>Currently the following Flow Features have been implemented:</p>

<ul>
<li>[x] Access API gRPC</li>
<li>[x] RLP encode &amp; decode</li>
<li>[x] Cadence type support</li>
<li>[x] Transaction DSL</li>
<li>[x] Send Transaction</li>
<li>[x] Execute script with argument</li>
<li>[x] Handle multiple signatures and keys</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>

<p>This is a Swift Package, and can be installed via Xcode with the URL of this repository:</p>
<pre class="highlight swift"><code><span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Flow"</span><span class="p">,</span> <span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/zed-io/flow-swift.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"0.0.8-beta"</span><span class="p">)</span>
</code></pre>
<h2 id='config' class='heading'>Config</h2>

<p>To config the SDK, you will just need provider the chainID for it. The default chainID is <strong>Mainnet</strong>.
If you want to use mainnet, you can ignore this configuration.</p>
<pre class="highlight swift"><code><span class="n">flow</span><span class="o">.</span><span class="nf">configure</span><span class="p">(</span><span class="nv">chainID</span><span class="p">:</span> <span class="o">.</span><span class="n">testnet</span><span class="p">)</span>
</code></pre>

<p>If you want to use a custom gRPC for the access API, you can definite your own one.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">endpoint</span> <span class="o">=</span> <span class="kt">Flow</span><span class="o">.</span><span class="kt">ChainID</span><span class="o">.</span><span class="kt">Endpoint</span><span class="p">(</span><span class="nv">node</span><span class="p">:</span> <span class="s">"flow-testnet.g.alchemy.com"</span><span class="p">,</span> <span class="nv">port</span><span class="p">:</span> <span class="mi">443</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">chainID</span> <span class="o">=</span> <span class="kt">Flow</span><span class="o">.</span><span class="kt">ChainID</span><span class="o">.</span><span class="nf">custom</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Alchemy-Testnet"</span><span class="p">,</span> <span class="nv">endpoint</span><span class="p">:</span><span class="n">endpoint</span><span class="p">)</span>
<span class="n">flow</span><span class="o">.</span><span class="nf">configure</span><span class="p">(</span><span class="nv">chainID</span><span class="p">:</span> <span class="n">chainID</span><span class="p">)</span>
</code></pre>
<h2 id='access-api' class='heading'>Access API</h2>

<p>Here are some example how to create a gRPC client in the SDK to make access API call.
For more info about access API, please check this <a href="https://docs.onflow.org/access-api/#gatsby-focus-wrapper">official website</a></p>
<h3 id='block-callback' class='heading'>Block callback</h3>
<pre class="highlight swift"><code><span class="n">flow</span><span class="o">.</span><span class="n">accessAPI</span><span class="o">.</span><span class="n">getNetworkParameters</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="n">chainID</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">chainID</span><span class="p">)</span>
    <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='nio-eventloopfuture' class='heading'>NIO EventLoopFuture</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">testnet</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="nf">createAccessAPI</span><span class="p">(</span><span class="nv">chainID</span><span class="p">:</span> <span class="o">.</span><span class="n">testnet</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">call</span> <span class="o">=</span> <span class="n">testnet</span><span class="o">.</span><span class="nf">getTransactionResultById</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">Flow</span><span class="o">.</span><span class="kt">ID</span><span class="p">(</span><span class="nv">hex</span><span class="p">:</span> <span class="s">"0x1"</span><span class="p">))</span>
<span class="n">call</span><span class="o">.</span><span class="n">whenSuccess</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">call</span><span class="o">.</span><span class="n">whenFailure</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h2 id='transaction' class='heading'>Transaction</h2>

<p>In this SDK, you could build a transaction and send it to the chain.</p>
<h3 id='build-a-transaction' class='heading'>Build a transaction</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">tx</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">flow</span><span class="o">.</span><span class="n">buildTransaction</span> <span class="p">{</span>
    <span class="n">cadence</span> <span class="p">{</span>
        <span class="s">"""
            transaction(publicKey: String) {
                prepare(signer: AuthAccount) {
                    signer.addPublicKey(publicKey.decodeHex())
                }
            }
        """</span>
    <span class="p">}</span>

    <span class="n">proposer</span> <span class="p">{</span>
        <span class="n">address</span>
    <span class="p">}</span>

    <span class="n">authorizers</span> <span class="p">{</span>
        <span class="n">address</span>
    <span class="p">}</span>

    <span class="n">arguments</span> <span class="p">{</span>
        <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">value</span><span class="p">:</span> <span class="o">.</span><span class="nf">string</span><span class="p">(</span><span class="o">&lt;</span><span class="kt">PublicKey</span><span class="o">&gt;</span><span class="p">))</span>
    <span class="p">}</span>

    <span class="c1">// optional</span>
    <span class="n">gasLimit</span> <span class="p">{</span>
        <span class="mi">1000</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='send-a-transaction' class='heading'>Send a transaction</h3>

<p>To send a transaction to the chain, you need attach signers in here, which need to confirm <strong>FlowSigner</strong> protocol</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">FlowSigner</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">address</span><span class="p">:</span> <span class="kt">Flow</span><span class="o">.</span><span class="kt">Address</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>
    <span class="k">var</span> <span class="nv">keyIndex</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>
    <span class="kd">func</span> <span class="nf">signature</span><span class="p">(</span><span class="nv">signableData</span><span class="p">:</span> <span class="kt">Data</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">Data</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">txId</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">flow</span><span class="o">.</span><span class="nf">sendTransaction</span><span class="p">(</span><span class="nv">signers</span><span class="p">:</span> <span class="n">flowSigners</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cadence</span> <span class="p">{</span>
        <span class="s">"""
            transaction {
                prepare(signer1: AuthAccount, signer2: AuthAccount, signer3: AuthAccount) {
                  log(signer1.address)
                  log(signer2.address)
                  log(signer3.address)
              }
            }
        """</span>
    <span class="p">}</span>

    <span class="n">proposer</span> <span class="p">{</span>
        <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">address</span><span class="p">:</span> <span class="n">addressA</span><span class="p">,</span> <span class="nv">keyIndex</span><span class="p">:</span> <span class="mi">4</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">payer</span> <span class="p">{</span>
        <span class="n">addressB</span>
    <span class="p">}</span>

    <span class="n">authorizers</span> <span class="p">{</span>
        <span class="p">[</span><span class="n">addressC</span><span class="p">,</span> <span class="n">addressB</span><span class="p">,</span> <span class="n">addressA</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span><span class="o">.</span><span class="nf">wait</span><span class="p">()</span>
</code></pre>
<h2 id='common-operation' class='heading'>Common operation</h2>

<p>Here is a list of common functions in the flow SDK.
You can all the example usage <a href="./Tests/FlowOperationTest.swift">here</a></p>

<ul>
<li>[x] addKeyToAccount</li>
<li>[x] addContractToAccount</li>
<li>[x] createAccount</li>
<li>[x] removeAccountKeyByIndex</li>
<li>[x] removeContractFromAccount</li>
<li>[x] updateContractOfAccount</li>
</ul>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2021 <a class="link" href="https://github.com/zed-io/flow-swift" target="_blank" rel="external noopener">Zed Team</a>. All rights reserved. (Last updated: 2021-10-21)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
